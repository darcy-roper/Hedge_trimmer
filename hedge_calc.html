<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Betting Arbitrage Calculator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 2.5em;
            font-weight: 700;
        }
        
        .input-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .platform-input {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .platform-input:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.15);
            border-color: #667eea;
        }
        
        .platform-input label {
            display: block;
            font-weight: 600;
            color: #555;
            margin-bottom: 8px;
            font-size: 1.1em;
        }
        
        .platform-input input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 1.1em;
            transition: all 0.3s ease;
            background: #f8f9fa;
        }
        
        .platform-input input:focus {
            outline: none;
            border-color: #667eea;
            background: white;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .total-input {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
            margin-bottom: 30px;
            text-align: center;
        }
        
        .total-input label {
            display: block;
            font-weight: 600;
            color: #555;
            margin-bottom: 8px;
            font-size: 1.2em;
        }
        
        .total-input input {
            width: 200px;
            padding: 12px 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 1.2em;
            text-align: center;
            background: #f8f9fa;
            transition: all 0.3s ease;
        }
        
        .total-input input:focus {
            outline: none;
            border-color: #667eea;
            background: white;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .calculate-btn {
            display: block;
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 30px;
        }
        
        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }
        
        .results {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
            margin-top: 20px;
        }
        
        .arbitrage-opportunity {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 600;
            font-size: 1.1em;
        }
        
        .no-arbitrage {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 600;
            font-size: 1.1em;
        }
        
        .strategy-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .strategy-card {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            border-left: 4px solid #667eea;
        }
        
        .strategy-card h3 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.2em;
        }
        
        .bet-amount {
            font-size: 1.3em;
            font-weight: 700;
            color: #10b981;
            margin-bottom: 5px;
        }
        
        .potential-return {
            color: #666;
            font-size: 0.95em;
        }
        
        .summary {
            background: #f0f4f8;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            text-align: center;
        }
        
        .profit {
            font-size: 1.5em;
            font-weight: 700;
            color: #10b981;
            margin-bottom: 10px;
        }
        
        .roi {
            color: #666;
            font-size: 1.1em;
        }
        
        .hidden {
            display: none;
        }
        
        .mode-btn {
            padding: 10px 20px;
            margin: 0 10px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .mode-btn.active, .mode-btn:hover {
            background: #667eea;
            color: white;
        }
        
        .multi-section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
        }
        
        .multi-section h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        
        .legs-input {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .legs-input label {
            font-weight: 600;
            color: #555;
        }
        
        .legs-input select {
            padding: 8px 12px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 1em;
            background: white;
        }
        
        .outcome-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .outcome-card {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .outcome-card:hover {
            border-color: #667eea;
        }
        
        .outcome-card h4 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        .outcome-card input {
            width: 100%;
            padding: 10px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 1em;
            margin-bottom: 5px;
        }
        
        .outcome-card input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .stake-input {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .stake-input label {
            display: block;
            font-weight: 600;
            color: #555;
            margin-bottom: 8px;
            font-size: 1.1em;
        }
        
        .stake-input input {
            width: 200px;
            padding: 12px 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 1.1em;
            text-align: center;
        }
        
        .capital-breakdown {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .capital-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
        }
        
        .capital-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #e1e5e9;
        }
        
        .capital-item strong {
            display: block;
            color: #333;
            font-size: 1.1em;
            margin-bottom: 5px;
        }
        
        .capital-amount {
            font-size: 1.3em;
            font-weight: 700;
            color: #667eea;
        }
        
        .scenario-box {
            margin-bottom: 15px;
            border-radius: 12px;
            padding: 20px;
            border-left: 4px solid;
        }
        
        .scenario-win {
            background: #e8f5e8;
            border-left-color: #10b981;
        }
        
        .scenario-lose {
            background: #fff3cd;
            border-left-color: #f59e0b;
        }
        
        .scenario-lose-bad {
            background: #ffeaa7;
            border-left-color: #e17055;
        }
        
        .scenario-title {
            font-weight: 600;
            margin-bottom: 15px;
            font-size: 1.1em;
        }
        
        .scenario-win .scenario-title {
            color: #10b981;
        }
        
        .scenario-lose .scenario-title {
            color: #f59e0b;
        }
        
        .scenario-lose-bad .scenario-title {
            color: #e17055;
        }
        
        .calculation-steps {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9em;
            line-height: 1.6;
        }
        
        .total-line {
            border-top: 1px solid;
            margin-top: 10px;
            padding-top: 10px;
            font-weight: 600;
        }
        
        .scenario-win .total-line {
            border-color: #10b981;
        }
        
        .scenario-lose .total-line {
            border-color: #f59e0b;
        }
        
        .scenario-lose-bad .total-line {
            border-color: #e17055;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🎯 Arbitrage & Multi-Bet Calculator</h1>
        
        <div style="text-align: center; margin-bottom: 30px;">
            <button class="mode-btn active" onclick="switchMode('arbitrage')">Arbitrage Mode</button>
            <button class="mode-btn" onclick="switchMode('multi')">Multi-Bet Hedging</button>
        </div>
        
        <div id="arbitrageSection">
            <div class="input-section">
                <div class="platform-input">
                    <label for="odds1">SportsBet Odds</label>
                    <input type="number" id="odds1" step="0.01" min="1.01" placeholder="e.g., 2.50">
                </div>
                <div class="platform-input">
                    <label for="odds2">Ladbrokes Odds</label>
                    <input type="number" id="odds2" step="0.01" min="1.01" placeholder="e.g., 2.75">
                </div>
                <div class="platform-input">
                    <label for="odds3">PointsBet Odds</label>
                    <input type="number" id="odds3" step="0.01" min="1.01" placeholder="e.g., 2.60">
                </div>
            </div>
            
            <div class="total-input">
                <label for="totalAmount">Total Amount to Bet ($)</label>
                <input type="number" id="totalAmount" step="0.01" min="1" placeholder="1000">
            </div>
            
            <button class="calculate-btn" onclick="calculateArbitrage()">Calculate Arbitrage Strategy</button>
        </div>

        <div id="multiSection" class="hidden">
            <div class="multi-section">
                <h3>Multi-Bet Setup</h3>
                <div class="legs-input">
                    <label for="numLegs">Number of guaranteed legs:</label>
                    <select id="numLegs">
                        <option value="1">1 leg</option>
                        <option value="2" selected>2 legs</option>
                        <option value="3">3 legs</option>
                        <option value="4">4 legs</option>
                        <option value="5">5 legs</option>
                    </select>
                </div>
                
                <div class="outcome-section">
                    <div class="outcome-card">
                        <h4>Option A (Favourite)</h4>
                        <input type="number" id="oddsA" step="0.01" min="1.01" placeholder="2.20" value="2.20">
                        <small>Multi-bet odds with favourite to win</small>
                        <div style="margin-top: 10px;">
                            <label style="font-size: 0.9em; display: flex; align-items: center; gap: 5px;">
                                <input type="checkbox" id="betReturnA" onchange="updateBetReturn('A')">
                                Bet Return if leg fails (max $50)
                            </label>
                        </div>
                    </div>
                    <div class="outcome-card">
                        <h4>Option B (Underdog)</h4>
                        <input type="number" id="oddsB" step="0.01" min="1.01" placeholder="4.75" value="4.75">
                        <small>Multi-bet odds with underdog to win</small>
                        <div style="margin-top: 10px;">
                            <label style="font-size: 0.9em; display: flex; align-items: center; gap: 5px;">
                                <input type="checkbox" id="betReturnB" onchange="updateBetReturn('B')">
                                Bet Return if leg fails (max $50)
                            </label>
                        </div>
                    </div>
                </div>
                
                <div class="stake-input">
                    <label for="totalCapital">Total Capital Available ($)</label>
                    <input type="number" id="totalCapital" step="0.01" min="1" placeholder="100">
                    <small style="display: block; margin-top: 8px; color: #666;">
                        This will be split optimally between multi-bet and hedge positions
                    </small>
                </div>
                
                <button class="calculate-btn" onclick="calculateMultiHedge()">Calculate Hedging Strategy</button>
            </div>
        </div>
        
        <div id="results" class="results hidden">
            <div id="opportunityStatus"></div>
            <div id="strategy" class="strategy-grid"></div>
            <div id="summary" class="summary"></div>
        </div>
    </div>

    <script>
        function switchMode(mode) {
            const arbitrageSection = document.getElementById('arbitrageSection');
            const multiSection = document.getElementById('multiSection');
            const results = document.getElementById('results');
            const buttons = document.querySelectorAll('.mode-btn');
            
            // Hide results when switching modes
            results.classList.add('hidden');
            
            if (mode === 'arbitrage') {
                arbitrageSection.classList.remove('hidden');
                multiSection.classList.add('hidden');
                buttons[0].classList.add('active');
                buttons[1].classList.remove('active');
            } else if (mode === 'multi') {
                arbitrageSection.classList.add('hidden');
                multiSection.classList.remove('hidden');
                buttons[0].classList.remove('active');
                buttons[1].classList.add('active');
            }
        }
        
        function updateBetReturn(option) {
            const checkboxA = document.getElementById('betReturnA');
            const checkboxB = document.getElementById('betReturnB');
            
            // Only allow one bet return option to be selected
            if (option === 'A') {
                if (checkboxA.checked) {
                    checkboxB.checked = false;
                }
            } else {
                if (checkboxB.checked) {
                    checkboxA.checked = false;
                }
            }
        }
        
        function calculateArbitrage() {
            const odds1 = parseFloat(document.getElementById('odds1').value);
            const odds2 = parseFloat(document.getElementById('odds2').value);
            const odds3 = parseFloat(document.getElementById('odds3').value);
            const totalAmount = parseFloat(document.getElementById('totalAmount').value);
            
            if (!odds1 || !odds2 || !odds3 || !totalAmount) {
                alert('Please fill in all fields with valid numbers');
                return;
            }
            
            // Calculate implied probabilities
            const prob1 = 1 / odds1;
            const prob2 = 1 / odds2;
            const prob3 = 1 / odds3;
            const totalProb = prob1 + prob2 + prob3;
            
            // Check if arbitrage opportunity exists
            const isArbitrage = totalProb < 1;
            const arbitragePercentage = ((1 - totalProb) * 100).toFixed(2);
            
            // Calculate optimal bet amounts
            const bet1 = (totalAmount * prob1 / totalProb).toFixed(2);
            const bet2 = (totalAmount * prob2 / totalProb).toFixed(2);
            const bet3 = (totalAmount * prob3 / totalProb).toFixed(2);
            
            // Calculate potential returns
            const return1 = (bet1 * odds1).toFixed(2);
            const return2 = (bet2 * odds2).toFixed(2);
            const return3 = (bet3 * odds3).toFixed(2);
            
            // Calculate guaranteed profit
            const guaranteedReturn = Math.min(return1, return2, return3);
            const profit = (guaranteedReturn - totalAmount).toFixed(2);
            const roi = ((profit / totalAmount) * 100).toFixed(2);
            
            // Display results
            const resultsDiv = document.getElementById('results');
            const opportunityDiv = document.getElementById('opportunityStatus');
            const strategyDiv = document.getElementById('strategy');
            const summaryDiv = document.getElementById('summary');
            
            if (isArbitrage) {
                opportunityDiv.innerHTML = `
                    <div class="arbitrage-opportunity">
                        ✅ Arbitrage Opportunity Found! (${arbitragePercentage}% edge)
                    </div>
                `;
            } else {
                opportunityDiv.innerHTML = `
                    <div class="no-arbitrage">
                        ❌ No Arbitrage Opportunity (${Math.abs(arbitragePercentage)}% overround)
                    </div>
                `;
            }
            
            strategyDiv.innerHTML = `
                <div class="strategy-card">
                    <h3>SportsBet (${odds1})</h3>
                    <div class="bet-amount">$${bet1}</div>
                    <div class="potential-return">Returns: $${return1}</div>
                </div>
                <div class="strategy-card">
                    <h3>Ladbrokes (${odds2})</h3>
                    <div class="bet-amount">$${bet2}</div>
                    <div class="potential-return">Returns: $${return2}</div>
                </div>
                <div class="strategy-card">
                    <h3>PointsBet (${odds3})</h3>
                    <div class="bet-amount">$${bet3}</div>
                    <div class="potential-return">Returns: $${return3}</div>
                </div>
            `;
            
            if (isArbitrage) {
                summaryDiv.innerHTML = `
                    <div class="profit">Guaranteed Profit: $${profit}</div>
                    <div class="roi">ROI: ${roi}%</div>
                `;
            } else {
                summaryDiv.innerHTML = `
                    <div class="profit" style="color: #f59e0b;">Expected Loss: $${Math.abs(profit)}</div>
                    <div class="roi">ROI: ${roi}%</div>
                    <p style="margin-top: 10px; color: #666;">This is not profitable arbitrage. Consider betting on the platform with the highest odds instead.</p>
                `;
            }
            
            resultsDiv.classList.remove('hidden');
        }
        
        function calculateMultiHedge() {
            const oddsA = parseFloat(document.getElementById('oddsA').value);
            const oddsB = parseFloat(document.getElementById('oddsB').value);
            const totalCapital = parseFloat(document.getElementById('totalCapital').value);
            const betReturnA = document.getElementById('betReturnA').checked;
            const betReturnB = document.getElementById('betReturnB').checked;
            
            if (!oddsA || !oddsB || !totalCapital) {
                alert('Please fill in all fields with valid numbers');
                return;
            }
            
            // Auto-assign bet return to the option with lower odds (higher probability = more capital at risk)
            const shouldAutoAssign = !betReturnA && !betReturnB;
            let actualBetReturnA = betReturnA;
            let actualBetReturnB = betReturnB;
            
            if (shouldAutoAssign) {
                if (oddsA < oddsB) {
                    actualBetReturnA = true;
                    document.getElementById('betReturnA').checked = true;
                } else {
                    actualBetReturnB = true;
                    document.getElementById('betReturnB').checked = true;
                }
            }
            
            // Constants
            const maxBetReturn = 50;
            const baseSingleOddsA = 1.8; // Estimated single odds for favourite
            const baseSingleOddsB = 2.5; // Estimated single odds for underdog
            
            // Calculate optimal stake distribution
            let multiBetStake = 0;
            let hedgeStake = 0;
            let multiBetOdds = 0;
            let hedgeOdds = 0;
            let protectedOption = '';
            let actualReturn = 0;
            
            if (actualBetReturnA) {
                // Option A protected - allocate more to multi-bet since it's safer
                multiBetStake = totalCapital * 0.75; // 75% to protected multi-bet
                hedgeStake = totalCapital * 0.25; // 25% to hedge
                multiBetOdds = oddsA;
                hedgeOdds = baseSingleOddsB;
                protectedOption = 'A';
                actualReturn = Math.min(multiBetStake, maxBetReturn);
            } else if (actualBetReturnB) {
                // Option B protected
                multiBetStake = totalCapital * 0.75;
                hedgeStake = totalCapital * 0.25;
                multiBetOdds = oddsB;
                hedgeOdds = baseSingleOddsA;
                protectedOption = 'B';
                actualReturn = Math.min(multiBetStake, maxBetReturn);
            } else {
                // No protection - more conservative split
                multiBetStake = totalCapital * 0.60; // 60% to multi-bet
                hedgeStake = totalCapital * 0.40; // 40% to hedge
                multiBetOdds = oddsA; // Default to option A
                hedgeOdds = baseSingleOddsB;
                protectedOption = 'none';
            }
            
            // Calculate returns
            const multiBetReturn = multiBetStake * multiBetOdds;
            const hedgeReturn = hedgeStake * hedgeOdds;
            
            // Calculate scenarios
            let scenarios = {};
            
            if (protectedOption === 'A') {
                scenarios = {
                    aWins: {
                        multiBetProfit: multiBetReturn - multiBetStake,
                        hedgeLoss: -hedgeStake,
                        protectionUsed: 0,
                        total: (multiBetReturn - multiBetStake) - hedgeStake
                    },
                    aLoses: {
                        multiBetLoss: -multiBetStake,
                        hedgeProfit: hedgeReturn - hedgeStake,
                        protectionGained: actualReturn,
                        total: -multiBetStake + (hedgeReturn - hedgeStake) + actualReturn
                    }
                };
            } else if (protectedOption === 'B') {
                scenarios = {
                    bWins: {
                        multiBetProfit: multiBetReturn - multiBetStake,
                        hedgeLoss: -hedgeStake,
                        protectionUsed: 0,
                        total: (multiBetReturn - multiBetStake) - hedgeStake
                    },
                    bLoses: {
                        multiBetLoss: -multiBetStake,
                        hedgeProfit: hedgeReturn - hedgeStake,
                        protectionGained: actualReturn,
                        total: -multiBetStake + (hedgeReturn - hedgeStake) + actualReturn
                    }
                };
            } else {
                scenarios = {
                    aWins: {
                        multiBetProfit: multiBetReturn - multiBetStake,
                        hedgeLoss: -hedgeStake,
                        protectionUsed: 0,
                        total: (multiBetReturn - multiBetStake) - hedgeStake
                    },
                    bWins: {
                        multiBetLoss: -multiBetStake,
                        hedgeProfit: hedgeReturn - hedgeStake,
                        protectionUsed: 0,
                        total: -multiBetStake + (hedgeReturn - hedgeStake)
                    }
                };
            }
            
            // Display results
            const resultsDiv = document.getElementById('results');
            const opportunityDiv = document.getElementById('opportunityStatus');
            const strategyDiv = document.getElementById('strategy');
            const summaryDiv = document.getElementById('summary');
            
            const protectionStatus = actualBetReturnA || actualBetReturnB ? 
                `🛡️ Protected Hedging Strategy` : 
                `📊 Standard Hedging Strategy`;
            
            opportunityDiv.innerHTML = `
                <div class="arbitrage-opportunity">
                    ${protectionStatus}
                </div>
            `;
            
            // Strategy cards
            let strategyHtml = '';
            if (protectedOption === 'A') {
                strategyHtml = `
                    <div class="strategy-card">
                        <h3>Multi-Bet A (Protected) 🛡️</h3>
                        <div class="bet-amount">$${multiBetStake.toFixed(2)}</div>
                        <div class="potential-return">Odds: ${multiBetOdds} | Return: $${multiBetReturn.toFixed(2)}</div>
                        <div class="potential-return">Protection: $${actualReturn} if fails</div>
                    </div>
                    <div class="strategy-card">
                        <h3>Hedge Bet B</h3>
                        <div class="bet-amount">$${hedgeStake.toFixed(2)}</div>
                        <div class="potential-return">Odds: ${hedgeOdds} | Return: $${hedgeReturn.toFixed(2)}</div>
                    </div>
                `;
            } else if (protectedOption === 'B') {
                strategyHtml = `
                    <div class="strategy-card">
                        <h3>Multi-Bet B (Protected) 🛡️</h3>
                        <div class="bet-amount">${multiBetStake.toFixed(2)}</div>
                        <div class="potential-return">Odds: ${multiBetOdds} | Return: ${multiBetReturn.toFixed(2)}</div>
                        <div class="potential-return">Protection: ${actualReturn} if fails</div>
                    </div>
                    <div class="strategy-card">
                        <h3>Hedge Bet A</h3>
                        <div class="bet-amount">${hedgeStake.toFixed(2)}</div>
                        <div class="potential-return">Odds: ${hedgeOdds} | Return: ${hedgeReturn.toFixed(2)}</div>
                    </div>
                `;
            } else {
                strategyHtml = `
                    <div class="strategy-card">
                        <h3>Multi-Bet A</h3>
                        <div class="bet-amount">${multiBetStake.toFixed(2)}</div>
                        <div class="potential-return">Odds: ${multiBetOdds} | Return: ${multiBetReturn.toFixed(2)}</div>
                    </div>
                    <div class="strategy-card">
                        <h3>Hedge Bet B</h3>
                        <div class="bet-amount">${hedgeStake.toFixed(2)}</div>
                        <div class="potential-return">Odds: ${hedgeOdds} | Return: ${hedgeReturn.toFixed(2)}</div>
                    </div>
                `;
            }
            
            strategyDiv.innerHTML = strategyHtml;
            
            // Detailed summary with capital breakdown and scenarios
            let summaryHtml = `
                <div class="capital-breakdown">
                    <h4 style="margin-bottom: 15px; color: #333;">💰 Capital Allocation</h4>
                    <div class="capital-grid">
                        <div class="capital-item">
                            <strong>Total Capital</strong>
                            <div class="capital-amount">${totalCapital.toFixed(2)}</div>
                        </div>
                        <div class="capital-item">
                            <strong>Multi-Bet</strong>
                            <div class="capital-amount">${multiBetStake.toFixed(2)}</div>
                        </div>
                        <div class="capital-item">
                            <strong>Hedge Bet</strong>
                            <div class="capital-amount">${hedgeStake.toFixed(2)}</div>
                        </div>
                    </div>
                </div>
                
                <h4 style="margin-bottom: 20px; color: #333; text-align: center;">📊 Detailed Profit/Loss Analysis</h4>
            `;
            
            if (protectedOption === 'A') {
                summaryHtml += `
                    <div class="scenario-box scenario-win">
                        <div class="scenario-title">✅ If Option A Wins</div>
                        <div class="calculation-steps">
                            Multi-bet profit: ${multiBetReturn.toFixed(2)} - ${multiBetStake.toFixed(2)} = <strong>+${scenarios.aWins.multiBetProfit.toFixed(2)}</strong><br>
                            Hedge bet loss: <strong>-${hedgeStake.toFixed(2)}</strong><br>
                            Protection used: <strong>$0</strong>
                            <div class="total-line">
                                <strong>Total Profit: ${scenarios.aWins.total.toFixed(2)}</strong>
                            </div>
                        </div>
                    </div>
                    
                    <div class="scenario-box scenario-lose">
                        <div class="scenario-title">❌ If Option A Loses (Protected)</div>
                        <div class="calculation-steps">
                            Multi-bet loss: <strong>-${multiBetStake.toFixed(2)}</strong><br>
                            Hedge bet profit: ${hedgeReturn.toFixed(2)} - ${hedgeStake.toFixed(2)} = <strong>+${scenarios.aLoses.hedgeProfit.toFixed(2)}</strong><br>
                            Protection refund: <strong>+${actualReturn.toFixed(2)}</strong> ${actualReturn === maxBetReturn ? '(capped at $50)' : ''}
                            <div class="total-line">
                                <strong>Total Result: ${scenarios.aLoses.total.toFixed(2)}</strong>
                            </div>
                        </div>
                    </div>
                `;
            } else if (protectedOption === 'B') {
                summaryHtml += `
                    <div class="scenario-box scenario-win">
                        <div class="scenario-title">✅ If Option B Wins</div>
                        <div class="calculation-steps">
                            Multi-bet profit: ${multiBetReturn.toFixed(2)} - ${multiBetStake.toFixed(2)} = <strong>+${scenarios.bWins.multiBetProfit.toFixed(2)}</strong><br>
                            Hedge bet loss: <strong>-${hedgeStake.toFixed(2)}</strong><br>
                            Protection used: <strong>$0</strong>
                            <div class="total-line">
                                <strong>Total Profit: ${scenarios.bWins.total.toFixed(2)}</strong>
                            </div>
                        </div>
                    </div>
                    
                    <div class="scenario-box scenario-lose">
                        <div class="scenario-title">❌ If Option B Loses (Protected)</div>
                        <div class="calculation-steps">
                            Multi-bet loss: <strong>-${multiBetStake.toFixed(2)}</strong><br>
                            Hedge bet profit: ${hedgeReturn.toFixed(2)} - ${hedgeStake.toFixed(2)} = <strong>+${scenarios.bLoses.hedgeProfit.toFixed(2)}</strong><br>
                            Protection refund: <strong>+${actualReturn.toFixed(2)}</strong> ${actualReturn === maxBetReturn ? '(capped at $50)' : ''}
                            <div class="total-line">
                                <strong>Total Result: ${scenarios.bLoses.total.toFixed(2)}</strong>
                            </div>
                        </div>
                    </div>
                `;
            } else {
                summaryHtml += `
                    <div class="scenario-box scenario-win">
                        <div class="scenario-title">✅ If Option A Wins</div>
                        <div class="calculation-steps">
                            Multi-bet profit: ${multiBetReturn.toFixed(2)} - ${multiBetStake.toFixed(2)} = <strong>+${scenarios.aWins.multiBetProfit.toFixed(2)}</strong><br>
                            Hedge bet loss: <strong>-${hedgeStake.toFixed(2)}</strong>
                            <div class="total-line">
                                <strong>Total Profit: ${scenarios.aWins.total.toFixed(2)}</strong>
                            </div>
                        </div>
                    </div>
                    
                    <div class="scenario-box scenario-lose-bad">
                        <div class="scenario-title">❌ If Option B Wins (No Protection)</div>
                        <div class="calculation-steps">
                            Multi-bet loss: <strong>-${multiBetStake.toFixed(2)}</strong><br>
                            Hedge bet profit: ${hedgeReturn.toFixed(2)} - ${hedgeStake.toFixed(2)} = <strong>+${scenarios.bWins.hedgeProfit.toFixed(2)}</strong>
                            <div class="total-line">
                                <strong>Total Result: ${scenarios.bWins.total.toFixed(2)}</strong>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            summaryHtml += `
                <div style="background: #f0f4f8; padding: 15px; border-radius: 8px; text-align: center; margin-top: 20px;">
                    <p style="color: #666; font-size: 0.9em; margin: 0;">
                        💡 Single leg odds are estimated (A: ${baseSingleOddsA}, B: ${baseSingleOddsB}). Always verify actual odds before placing bets.
                    </p>
                    ${actualReturn === maxBetReturn && (multiBetStake > maxBetReturn) ? 
                        '<p style="color: #f59e0b; font-size: 0.85em; margin: 5px 0 0 0;">⚠️ Bet return is capped at $50 despite higher stake</p>' : ''}
                </div>
            `;
            
            summaryDiv.innerHTML = summaryHtml;
            resultsDiv.classList.remove('hidden');
        }
        
        // Allow Enter key to calculate (only for arbitrage mode)
        document.addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                const arbitrageSection = document.getElementById('arbitrageSection');
                if (!arbitrageSection.classList.contains('hidden')) {
                    calculateArbitrage();
                }
            }
        });
    </script>
</body>
</html>